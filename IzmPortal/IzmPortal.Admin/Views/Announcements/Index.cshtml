@model List<IzmPortal.Application.DTOs.Announcement.AnnouncementDto>

<div class="admin-card">
    <div class="admin-card-header d-flex justify-content-between align-items-center">
        <div>
            <h5 class="mb-0">Duyuru Yönetimi</h5>
            <small class="text-muted">Sistemdeki duyuruları yönetin</small>
        </div>

        <a asp-action="Create"
           class="admin-icon-btn"
           title="Yeni Duyuru">
            <i class="bi bi-plus"></i>
        </a>

    </div>

    <div class="admin-card-body p-0">

        <table class="admin-table">
            <thead>
                <tr>
                    <th>Başlık</th>
                    <th>Kategori</th>
                    <th class="text-center">Durum</th>
                    <th style="width:170px" class="text-end">İşlemler</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var item in Model)
                {
                    var rowClass = item.IsActive
                    ? "row-active"
                    : "row-passive";

                    <tr class="@rowClass">
                        <td>
                            <strong>@item.Title</strong>
                        </td>

                        <td class="text-muted">
                            @item.CategoryName
                        </td>

                        <td class="text-center">
                            <span class="status-dot @(item.IsActive ? "status-active" : "status-passive")"></span>
                        </td>

                        <td class="text-end">
                            <div class="d-inline-flex align-items-center gap-2">

                                @if (item.IsActive)
                                {
                                    <form asp-action="Deactivate"
                                          method="post">
                                        @Html.AntiForgeryToken()
                                        <input type="hidden" name="id" value="@item.Id" />
                                        <button class="btn btn-outline-secondary btn-sm fixed-action-btn">
                                            Pasif Yap
                                        </button>
                                    </form>
                                }
                                else
                                {
                                    <form asp-action="Activate"
                                          method="post">
                                        @Html.AntiForgeryToken()
                                        <input type="hidden" name="id" value="@item.Id" />
                                        <button class="btn btn-outline-success btn-sm fixed-action-btn">
                                            Aktif Yap
                                        </button>
                                    </form>
                                }

                                <a asp-action="Edit"
                                   asp-route-id="@item.Id"
                                   class="btn btn-outline-primary btn-sm fixed-icon-btn">
                                    <i class="bi bi-pencil"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

    </div>
</div>
