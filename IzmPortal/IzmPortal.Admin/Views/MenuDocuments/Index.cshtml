@model List<IzmPortal.Application.DTOs.MenuDocument.MenuDocumentDto>

@{
    ViewData["Title"] = "Dokümanlar";
    var menuId = (Guid)ViewBag.MenuId;
}

<div class="admin-page">

    @await Html.PartialAsync(
    "_PageHeader",
        ("Dokümanlar",
        "Seçilen alt menüye ait dokümanlar",
        $"<a href='/MenuDocuments/Upload?menuId={menuId}' class='btn btn-primary btn-sm'>Doküman Yükle</a>")
        )

    <div class="admin-table">

        @if (!Model.Any())
        {
            <div class="admin-empty">
                <i class="fa fa-file-pdf"></i>
                <p>Bu alt menüye ait doküman bulunmuyor.</p>
                <a href="/MenuDocuments/Upload?menuId=@menuId"
                   class="btn btn-primary btn-sm">
                    İlk Dokümanı Yükle
                </a>
            </div>
        }
        else
        {
            <table class="table table-hover align-middle">
                <thead>
                    <tr>
                        <th>Başlık</th>
                        <th style="width:120px;">Sıra</th>
                        <th style="width:120px;">Durum</th>
                        <th style="width:200px;" class="text-end">İşlemler</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                <a href="@item.FilePath" target="_blank">
                                    @item.Title
                                </a>
                            </td>
                            <td>@item.Order</td>
                            <td>
                                @if (item.IsActive)
                                {
                                    <span class="badge bg-success">Aktif</span>
                                }
                                else
                                {
                                    <span class="badge bg-secondary">Pasif</span>
                                }
                            </td>
                            <td class="text-end">
                                <form asp-action="Delete"
                                      method="post"
                                      class="d-inline">
                                    <input type="hidden" name="id" value="@item.Id" />
                                    <input type="hidden" name="menuId" value="@menuId" />
                                    <button type="submit"
                                            class="btn btn-outline-danger btn-sm"
                                            onclick="return confirm('Doküman silinsin mi?')">
                                        Sil
                                    </button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }

        <div class="mt-3">
            <a href="/Menus" class="btn btn-outline-secondary btn-sm">
                Menü Listesine Dön
            </a>
        </div>

    </div>
</div>
